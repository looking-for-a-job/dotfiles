#!/usr/bin/env python
import task.setup
import os
import subprocess
import task_categories
from task.classes import Task

class MyTask(Task):
    def shell(self,args):
        out = subprocess.check_output(args).rstrip()
        if out.isdigit():
            out = int(out)
        return out

    def psql(self,sql,dbname):
        args = ["psql","-At","-c",sql,dbname]
        out = subprocess.check_output(args).rstrip()
        if out.isdigit():
            out = int(out)
        return out

class Now(MyTask):
    @property
    def category(self):
        return task_categories.APPS.NOW


class Today(MyTask):
    @property
    def category(self):
        return task_categories.APPS.TODAY
